<!DOCTYPE html><!--_8eaeoBrSb0hLrL10hi58--><html data-scroll-behavior="smooth" lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/asap_condensed_v17_latin_500-s.p.201eb6cb.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/ibm_plex_serif_v19_latin_500-s.p.0a408628.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/roboto_condensed_v27_latin_500-s.p.fa484095.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/satisfy_v21_latin_regular-s.p.947b27dc.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/cc0df02d4327479b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/eb89a7503d7ea580.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/67dc7610a54a20e2.js"/><script src="/_next/static/chunks/8a9df1c5c77110c3.js" async=""></script><script src="/_next/static/chunks/be93391230cd11c6.js" async=""></script><script src="/_next/static/chunks/b2bb46eb60b37f08.js" async=""></script><script src="/_next/static/chunks/turbopack-d2d4076273b410f5.js" async=""></script><script src="/_next/static/chunks/ae2273c76f546f10.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/bf5f4fcdb6d9e318.js" async=""></script><script src="/_next/static/chunks/4703bc040350e6fb.js" async=""></script><link rel="preload" href="/js/nav.js" as="script"/><link rel="preload" href="/js/katex.min.js" as="script"/><link rel="preload" href="/pagefind/pagefind-ui.js" as="script"/><link rel="preload" href="/js/pagefind-extra.js" as="script"/><meta name="next-size-adjust" content=""/><meta name="color-scheme" content="light dark"/><title>Common Defects</title><meta name="application-name" content="Steve on Software"/><meta name="author" content="Steve Teleki"/><meta name="generator" content="Next.js+Unified.js"/><meta name="keywords" content="Design,Quality"/><meta name="referrer" content="origin-when-cross-origin"/><meta name="creator" content="Steve Teleki"/><meta name="publisher" content="Steve Teleki"/><meta name="robots" content="index, follow, nocache"/><meta name="category" content="technology"/><meta name="summary" content="A while back I had the opportunity to analyze a few defects up close. I saw some interesting types and I decided to write about them. Understanding the nature of your defects could prove to be useful for your day-to-day work. Most of the program defects that I have seen fall into one of the following categories..."/><meta name="format-detection" content="telephone=no, address=no, email=no"/><meta property="og:title" content="Common Defects"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Common Defects"/><link rel="icon" href="/favicon.ico?favicon.b28d3dba.ico" sizes="256x256" type="image/x-icon"/><link rel="icon" href="/icon.png?icon.5872d748.png" sizes="180x180" type="image/png"/><link rel="apple-touch-icon" href="/apple-icon.png?apple-icon.5872d748.png" sizes="180x180" type="image/png"/><script>
              (function() {
                try {
                  var theme = localStorage.getItem("theme");
                  var dark = theme === "dark" || (theme === "system" && window.matchMedia("(prefers-color-scheme: dark)").matches);
                  if (dark) {
                    document.documentElement.classList.add("dark");
                    document.documentElement.setAttribute("data-theme", "dark");
                    document.documentElement.style.colorScheme = "dark";
                  } else {
                    document.documentElement.classList.remove("dark");
                    document.documentElement.setAttribute("data-theme", "light");
                    document.documentElement.style.colorScheme = "light";
                  }
                } catch(e) {}
              })();
            </script><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><header class="header-banner brand-bg brand-text"><div class="header-combined brand-page-max-width"><div class="header-spacer"></div><div class="header-title"><div class="header-title-site"><a href="/"><div class="relative top-1 inline-block p-1">üß≠</div>¬†<div class="relative top-1 inline-block"><span class="plexserif500_f0cf51b6-module___K5BKq__className">Steve on Software</span></div></a></div><button class="header-title-mobile-nav-toggle"><div class="mobile-nav-icon relative p-2">‚â°</div></button></div><nav class="header-nav"><div class="header-nav-mobile-menu-closing-modal"></div><ul class="header-nav-primary brand-text-nav robotocond500_1477471c-module__3nXAyW__className" data-visible="false"><li><a class="whitespace-nowrap" href="/about/"><div class="menu-div">About</div></a></li><li><a class="whitespace-nowrap" href="/articles/"><div class="menu-div">Articles</div></a></li><li><a class="whitespace-nowrap" href="/articles/reading/"><div class="menu-div">Reading</div></a></li><li><a class="whitespace-nowrap" href="/articles/talks/"><div class="menu-div">Talks</div></a></li><li><a class="whitespace-nowrap" href="/tags/"><div class="menu-div">Tag Cloud</div></a></li><li><div class="cursor-pointer whitespace-nowrap"><div class="menu-div">üîç Search</div></div></li><li><div class="menu-div"><button type="button" aria-label="Toggle color scheme" class="rounded-2xl px-2 text-sm shadow-sm transition" disabled="">‚Ä¶</button></div></li><li class="privacy-menu"><a href="/articles/privacy-policy/"><div class="menu-div">Privacy Policy</div></a></li></ul></nav></div><div class="goto-top-btn rounded-full border-2" data-visible="false"><img alt="" loading="lazy" width="48" height="48" decoding="async" data-nimg="1" style="color:transparent" src="/assets/angle-double-up.svg"/></div></header><main data-pagefind-body="true" class="flex flex-col"><article id="article" class="content-page grid grid-cols-1 self-center"><div class="content-prose"><h1 class="">Common Defects</h1></div><div class="content-subtitle"></div><div class="content-date-tags"><div class="brand-text-accent my-2 text-sm">üóìÔ∏è<span class="date-short px-1">Oct 14, 2001</span><span class="date-long px-1">October 14, 2001</span><span class="pr-2"></span><span><span class="inline whitespace-nowrap pr-2 leading-loose"><a href="/tags/design/">üè∑Ô∏è <!-- -->Design</a></span></span><span><span class="inline whitespace-nowrap pr-2 leading-loose"><a href="/tags/quality/">üè∑Ô∏è <!-- -->Quality</a></span></span></div></div><div class="content-reading-time">üìñ 6 minute read</div><div class="content-prose pt-4">
<p>A while back I had the opportunity to analyze a few defects up close. I saw some interesting types and I decided to write about them. Understanding the nature of your defects could prove to be useful for your day-to-day work. Most of the program defects that I have seen fall into one of the following categories:</p>
<ol>
  <li>Asking a component to do too much. Closely related: having only a few really big components in a large program.</li>
  <li>Misunderstanding the responsibilities of a component, or never deciding on clear responsibilities in the first place.</li>
  <li>Not knowing the cost or nature of operations, language features, library, API calls and thus negatively impacting program performance.</li>
  <li>Misunderstanding what is global data and what is local data and as such synchronizing too much or not enough.</li>
</ol>
<p>Let's examine each of them in more detail.</p>
<h2>1. Asking a Component to do Too Much</h2>
<p>It probably happened to you before: you look at the list of methods from a component and you can't tell what is this component responsible for. As you read through the list, you get the impression that this component is universally usable for about a half or a third of what the program does. Unless this component is a facade for a subsystem, you are in trouble.</p>
<p>You also notice that it is increasingly difficult to debug the system. It feels like all roads lead to Rome, or translated to software: no matter what call you are tracing, you have to pass through the same giant components. After a while you don't understand where the calls go and you find yourself just trying things out.</p>
<p>To make sure that we are on the same page, here are the definitions for a component and for a class: A <strong>component</strong> is a concrete specification of an <strong>abstraction</strong> (either from the problem domain or from a supporting domain, commonly known as API or library). A <strong>class</strong> is a concrete specification of an <strong>abstract data type</strong> (ADT). How do components and classes relate? A component is made of one or more classes. The key here is that a component usually has a real world equivalent, while the class is usually a "fabrication."</p>
<p>This is a good time to stop, reorganize, maybe redesign, and refactor. Figure out how can you make your component more cohesive again. Pare down the responsibilities to a set that makes sense and is cohesive. Maybe create a few new components. As you are reworking the components, watch out for coupling between them. It makes sense to draw up a dependency graph and to get rid of loops from it.</p>
<p>Maybe the way you notice this defect is that you are not sure where to put the new functionality that you have to add to the program, and you start putting things in components pretty much randomly. This leads into the next problem:</p>
<h2>2. Misunderstanding the Responsibilities of a Component</h2>
<p>There is a quick test to see if the responsibilities of a component are clear: read them and then see if you can retell them. If you remember what a component does, then it is easier to add a new responsibility that is a good fit with the existing responsibilities. If you don't remember what are the responsibilities of a given component, then you are almost guaranteed several program defects both by you and by others who use the component you have created. The same applies to method names, requirements, etc. This test has not failed me yet.</p>
<p>If you organize the program, as much of it as you can, into components that represent aspects of the customer's business, then your program structure will be more resilient to changes then if you organize it along features. The customer's business fundamentals tend to not change nearly as fast as their wishes about your program. And when the business changes, your changes might be localized to the business components.</p>
<h2>3. Not Knowing the Cost or Nature of Operations, Language Features, Library, API Calls and thus Negatively Impacting Performance</h2>
<p>In the <em>The Design and Evolution of C++</em> Bjarne Stroustrup describes one of the Low-Level Programming Support Rules for C++ as: <strong>what you don't use, you don't pay for (zero-overhead rule)</strong> (121). The interesting part of this statement is not explicit: <strong>you must know the cost of each language feature</strong> or you won't be able to decide what you are <strong>willing</strong> to pay for.</p>
<p>It is interesting to note that Stroustrup <em>designed</em> C++ to suit his needs and the needs of its users. Chapter 4 contains the <em>C++ Language Design Rules</em>. He had a problem with "how to analyze the network traffic [in telephone switching equipment]" and he decided that in order to solve this rather complicated problem he needed better tools. So he created the Cpre, which later became C++.</p>
<p>Amongst you the Java programmers may wonder how this applies to you. Quite well. Even when you program in Java you need to know what is happening behind the scenes if you are to write production quality software. Otherwise, your program will be plagued with performance problems.</p>
<p>Performance problems are an ugly beast because they don't show up when you test your program with a few users or limited data. Everything seems to work fine and takes a limited amount of time. But then you turn on the firehose and all things come to a halt. The display routine doesn't work anymore because handling 2,000 items is not the same as handling 10. The database is slow, because the query that worked on 100-record table doesn't work well on 10,000. I know that some of you are fanatics about this stuff and have solved this problem well. Drop me a line and share your experience with others.</p>
<p>OK, you say: What is the answer? Well, it depends. I think that knowing that this problem exists is half the battle. The other half is devising the right solution. Tell me about your specific problem and I will help you come up with a solution.</p>
<h2>4. Misunderstanding What is Global Data and What is Local Data and Synchronizing Too Much or Not Enough</h2>
<p>One of the basic rules of concurrent programming that I learned back in college that still holds true in the age of Java is that you must have protected access to all global data. This is a simple and easy to remember rule that can keep you out of a lot of trouble. Now all you have to do is keep thread local data and global data separated (don't forget about those parameters that get passed back and forth between threads) and you will have yourself a well-behaved program.</p>
<p>This is not nearly as hard as it sounds. If you "limit" yourself to only doing things this way, you might not be writing some potentially exciting component that solves a problem in a completely unique way that nobody else can get without two PhDs. But, hey, the program you write will work. Period. Here are a few simple steps to help you figure out what global data is and how to deal with it:</p>
<ol>
  <li>Count the number of separate threads in the program.</li>
  <li>Count the number of threads that can run at the same time.</li>
  <li>Identify all pieces of data that are accessed by more than one thread identified in 2. Include parameters that get passed between threads in this list. You must protect access to this data.</li>
  <li>Protect access to data with locks. Use one or more locks, as necessary. Don't forget: <strong>Always attempt to lock in the same order and unlock in the reverse of the locking order</strong>.</li>
</ol>
<p>Again, this is a minimal solution, but it works. You can solve most problems this way. If you think that there is anything wrong with it, drop me a line. For those of you programming in Java, a good book on the subject is Concurrent Programming in Java, 2nd. Ed., Design Principles and Patterns, by Doug Lea.</p>
<p>I know that both of these subjects deserve way more detail than what I have time for in this short note, but I hope that now that you are aware of these problems, you will take steps to prevent them in your next project.</p>
<h2>How Can You Start?</h2>
<p>A few simple rules can get you going and can help you create better components:</p>
<ul>
  <li>Component interfaces should be minimal yet usable.</li>
  <li>Class interfaces should be primitive.</li>
  <li>Public interfaces should be complete.</li>
  <li>Private interfaces should be sufficient.</li>
</ul>
<p>Ask the question: What component would I need to have to get the job done? If I would have a component that can do x, then could I implement what the customer is asking for? and so on. Group the requested features into components. Do the memory test with them. Ask a friend to also do the memory test. In no time you'll be writing great components.</p>
<p>For more on this refer to the Lakos book, Large Scale C++ Program Design. And don't worry about the title, most of the stuff applies nicely to Java as well. Another good source for advice and thorough theoretical explanation is Object-Oriented Software Construction, 2nd Ed. by Bertrand Meyer. And of course, you can always crack open Code Complete by Steve McConnell.</p>
<p>Let me how your components are coming along.</p>
</div></article><div class="pager"><div class="pager-btn pager-btn-left justify-self-start"><a href="/articles/apollo-guidance-computer/"><div class="flex flex-row gap-2"><div class="self-center">‚Äπ‚Äπ</div><div class="link-long">The Apollo Guidance Computer</div></div></a></div><div class="pager-btn pager-btn-right justify-self-end"><a href="/articles/what-do-you-know/"><div class="flex flex-row gap-2"><div class="link-long">What do you know?</div><div class="self-center">‚Ä∫‚Ä∫</div></div></a></div></div></main><!--$--><!--/$--><footer class="brand-bg brand-text sticky bottom-0 flex p-1"><div class="brand-page-max-width m-auto flex w-full flex-row justify-between px-4"><div class="robotocond500_1477471c-module__3nXAyW__className">¬© <!-- -->2025<!-- --> Steve Teleki. All rights reserved.</div><div class="privacy-footer"><a href="/articles/privacy-policy/"><span class="robotocond500_1477471c-module__3nXAyW__className">Privacy Policy</span></a></div></div></footer><dialog id="search_modal" class="modal"><div class="modal-box w-11/12 max-w-5xl"><h3 class="pb-6 text-lg font-bold">üß≠¬†Steve on Software Site Search</h3><div id="search" class=""></div><form method="dialog"><button class="btn btn-circle btn-ghost btn-sm absolute top-2 right-2">‚úñÔ∏è</button></form></div><form class="modal-backdrop" method="dialog"><button>close</button></form></dialog><script src="/_next/static/chunks/67dc7610a54a20e2.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[2971,[\"/_next/static/chunks/ae2273c76f546f10.js\"],\"Header\"]\n3:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"default\"]\n4:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"default\"]\n5:I[29306,[\"/_next/static/chunks/ae2273c76f546f10.js\",\"/_next/static/chunks/4703bc040350e6fb.js\"],\"default\"]\n6:I[22016,[\"/_next/static/chunks/ae2273c76f546f10.js\"],\"default\"]\n7:I[79520,[\"/_next/static/chunks/ae2273c76f546f10.js\"],\"\"]\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"OutletBoundary\"]\nb:I[11533,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"AsyncMetadataOutlet\"]\nd:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"ViewportBoundary\"]\nf:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"MetadataBoundary\"]\n10:\"$Sreact.suspense\"\n12:I[68027,[\"/_next/static/chunks/ae2273c76f546f10.js\"],\"default\"]\n:HL[\"/_next/static/chunks/cc0df02d4327479b.css\",\"style\"]\n:HL[\"/_next/static/chunks/eb89a7503d7ea580.css\",\"style\"]\n:HL[\"/_next/static/media/asap_condensed_v17_latin_500-s.p.201eb6cb.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/ibm_plex_serif_v19_latin_500-s.p.0a408628.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/roboto_condensed_v27_latin_500-s.p.fa484095.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/satisfy_v21_latin_regular-s.p.947b27dc.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"_8eaeoBrSb0hLrL10hi58\",\"p\":\"\",\"c\":[\"\",\"articles\",\"common-defects\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"common-defects\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/cc0df02d4327479b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/eb89a7503d7ea580.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/ae2273c76f546f10.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"data-scroll-behavior\":\"smooth\",\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"color-scheme\",\"content\":\"light dark\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n              (function() {\\n                try {\\n                  var theme = localStorage.getItem(\\\"theme\\\");\\n                  var dark = theme === \\\"dark\\\" || (theme === \\\"system\\\" \u0026\u0026 window.matchMedia(\\\"(prefers-color-scheme: dark)\\\").matches);\\n                  if (dark) {\\n                    document.documentElement.classList.add(\\\"dark\\\");\\n                    document.documentElement.setAttribute(\\\"data-theme\\\", \\\"dark\\\");\\n                    document.documentElement.style.colorScheme = \\\"dark\\\";\\n                  } else {\\n                    document.documentElement.classList.remove(\\\"dark\\\");\\n                    document.documentElement.setAttribute(\\\"data-theme\\\", \\\"light\\\");\\n                    document.documentElement.style.colorScheme = \\\"light\\\";\\n                  }\\n                } catch(e) {}\\n              })();\\n            \"}}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L5\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"footer\",null,{\"className\":\"brand-bg brand-text sticky bottom-0 flex p-1\",\"children\":[\"$\",\"div\",null,{\"className\":\"brand-page-max-width m-auto flex w-full flex-row justify-between px-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"robotocond500_1477471c-module__3nXAyW__className\",\"children\":[\"¬© \",2025,\" Steve Teleki. All rights reserved.\"]}],[\"$\",\"div\",null,{\"className\":\"privacy-footer\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/articles/privacy-policy\",\"children\":[\"$\",\"span\",null,{\"className\":\"robotocond500_1477471c-module__3nXAyW__className\",\"children\":\"Privacy Policy\"}]}]}]]}]}],[\"$\",\"dialog\",null,{\"id\":\"search_modal\",\"className\":\"modal\",\"children\":[[\"$\",\"div\",null,{\"className\":\"modal-box w-11/12 max-w-5xl\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"pb-6 text-lg font-bold\",\"children\":\"üß≠¬†Steve on Software Site Search\"}],[\"$\",\"div\",null,{\"id\":\"search\",\"className\":\"\"}],[\"$\",\"form\",null,{\"method\":\"dialog\",\"children\":[\"$\",\"button\",null,{\"className\":\"btn btn-circle btn-ghost btn-sm absolute top-2 right-2\",\"children\":\"‚úñÔ∏è\"}]}]]}],[\"$\",\"form\",null,{\"method\":\"dialog\",\"className\":\"modal-backdrop\",\"children\":[\"$\",\"button\",null,{\"children\":\"close\"}]}]]}]]}],[\"$\",\"$L7\",null,{\"src\":\"/js/nav.js\"}],[\"$\",\"$L7\",null,{\"src\":\"/js/katex.min.js\"}],[\"$\",\"$L7\",null,{\"src\":\"/pagefind/pagefind-ui.js\"}],[\"$\",\"$L7\",null,{\"src\":\"/js/pagefind-extra.js\"}]]}]]}],{\"children\":[\"articles\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"common-defects\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L8\",null,[\"$\",\"$L9\",null,{\"children\":[\"$La\",[\"$\",\"$Lb\",null,{\"promise\":\"$@c\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Ld\",null,{\"children\":\"$Le\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Lf\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$10\",null,{\"fallback\":null,\"children\":\"$L11\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$12\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/cc0df02d4327479b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/eb89a7503d7ea580.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"13:T243e,"])</script><script>self.__next_f.push([1,"\n\u003cp\u003eA while back I had the opportunity to analyze a few defects up close. I saw some interesting types and I decided to write about them. Understanding the nature of your defects could prove to be useful for your day-to-day work. Most of the program defects that I have seen fall into one of the following categories:\u003c/p\u003e\n\u003col\u003e\n  \u003cli\u003eAsking a component to do too much. Closely related: having only a few really big components in a large program.\u003c/li\u003e\n  \u003cli\u003eMisunderstanding the responsibilities of a component, or never deciding on clear responsibilities in the first place.\u003c/li\u003e\n  \u003cli\u003eNot knowing the cost or nature of operations, language features, library, API calls and thus negatively impacting program performance.\u003c/li\u003e\n  \u003cli\u003eMisunderstanding what is global data and what is local data and as such synchronizing too much or not enough.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eLet's examine each of them in more detail.\u003c/p\u003e\n\u003ch2\u003e1. Asking a Component to do Too Much\u003c/h2\u003e\n\u003cp\u003eIt probably happened to you before: you look at the list of methods from a component and you can't tell what is this component responsible for. As you read through the list, you get the impression that this component is universally usable for about a half or a third of what the program does. Unless this component is a facade for a subsystem, you are in trouble.\u003c/p\u003e\n\u003cp\u003eYou also notice that it is increasingly difficult to debug the system. It feels like all roads lead to Rome, or translated to software: no matter what call you are tracing, you have to pass through the same giant components. After a while you don't understand where the calls go and you find yourself just trying things out.\u003c/p\u003e\n\u003cp\u003eTo make sure that we are on the same page, here are the definitions for a component and for a class: A \u003cstrong\u003ecomponent\u003c/strong\u003e is a concrete specification of an \u003cstrong\u003eabstraction\u003c/strong\u003e (either from the problem domain or from a supporting domain, commonly known as API or library). A \u003cstrong\u003eclass\u003c/strong\u003e is a concrete specification of an \u003cstrong\u003eabstract data type\u003c/strong\u003e (ADT). How do components and classes relate? A component is made of one or more classes. The key here is that a component usually has a real world equivalent, while the class is usually a \"fabrication.\"\u003c/p\u003e\n\u003cp\u003eThis is a good time to stop, reorganize, maybe redesign, and refactor. Figure out how can you make your component more cohesive again. Pare down the responsibilities to a set that makes sense and is cohesive. Maybe create a few new components. As you are reworking the components, watch out for coupling between them. It makes sense to draw up a dependency graph and to get rid of loops from it.\u003c/p\u003e\n\u003cp\u003eMaybe the way you notice this defect is that you are not sure where to put the new functionality that you have to add to the program, and you start putting things in components pretty much randomly. This leads into the next problem:\u003c/p\u003e\n\u003ch2\u003e2. Misunderstanding the Responsibilities of a Component\u003c/h2\u003e\n\u003cp\u003eThere is a quick test to see if the responsibilities of a component are clear: read them and then see if you can retell them. If you remember what a component does, then it is easier to add a new responsibility that is a good fit with the existing responsibilities. If you don't remember what are the responsibilities of a given component, then you are almost guaranteed several program defects both by you and by others who use the component you have created. The same applies to method names, requirements, etc. This test has not failed me yet.\u003c/p\u003e\n\u003cp\u003eIf you organize the program, as much of it as you can, into components that represent aspects of the customer's business, then your program structure will be more resilient to changes then if you organize it along features. The customer's business fundamentals tend to not change nearly as fast as their wishes about your program. And when the business changes, your changes might be localized to the business components.\u003c/p\u003e\n\u003ch2\u003e3. Not Knowing the Cost or Nature of Operations, Language Features, Library, API Calls and thus Negatively Impacting Performance\u003c/h2\u003e\n\u003cp\u003eIn the \u003cem\u003eThe Design and Evolution of C++\u003c/em\u003e Bjarne Stroustrup describes one of the Low-Level Programming Support Rules for C++ as: \u003cstrong\u003ewhat you don't use, you don't pay for (zero-overhead rule)\u003c/strong\u003e (121). The interesting part of this statement is not explicit: \u003cstrong\u003eyou must know the cost of each language feature\u003c/strong\u003e or you won't be able to decide what you are \u003cstrong\u003ewilling\u003c/strong\u003e to pay for.\u003c/p\u003e\n\u003cp\u003eIt is interesting to note that Stroustrup \u003cem\u003edesigned\u003c/em\u003e C++ to suit his needs and the needs of its users. Chapter 4 contains the \u003cem\u003eC++ Language Design Rules\u003c/em\u003e. He had a problem with \"how to analyze the network traffic [in telephone switching equipment]\" and he decided that in order to solve this rather complicated problem he needed better tools. So he created the Cpre, which later became C++.\u003c/p\u003e\n\u003cp\u003eAmongst you the Java programmers may wonder how this applies to you. Quite well. Even when you program in Java you need to know what is happening behind the scenes if you are to write production quality software. Otherwise, your program will be plagued with performance problems.\u003c/p\u003e\n\u003cp\u003ePerformance problems are an ugly beast because they don't show up when you test your program with a few users or limited data. Everything seems to work fine and takes a limited amount of time. But then you turn on the firehose and all things come to a halt. The display routine doesn't work anymore because handling 2,000 items is not the same as handling 10. The database is slow, because the query that worked on 100-record table doesn't work well on 10,000. I know that some of you are fanatics about this stuff and have solved this problem well. Drop me a line and share your experience with others.\u003c/p\u003e\n\u003cp\u003eOK, you say: What is the answer? Well, it depends. I think that knowing that this problem exists is half the battle. The other half is devising the right solution. Tell me about your specific problem and I will help you come up with a solution.\u003c/p\u003e\n\u003ch2\u003e4. Misunderstanding What is Global Data and What is Local Data and Synchronizing Too Much or Not Enough\u003c/h2\u003e\n\u003cp\u003eOne of the basic rules of concurrent programming that I learned back in college that still holds true in the age of Java is that you must have protected access to all global data. This is a simple and easy to remember rule that can keep you out of a lot of trouble. Now all you have to do is keep thread local data and global data separated (don't forget about those parameters that get passed back and forth between threads) and you will have yourself a well-behaved program.\u003c/p\u003e\n\u003cp\u003eThis is not nearly as hard as it sounds. If you \"limit\" yourself to only doing things this way, you might not be writing some potentially exciting component that solves a problem in a completely unique way that nobody else can get without two PhDs. But, hey, the program you write will work. Period. Here are a few simple steps to help you figure out what global data is and how to deal with it:\u003c/p\u003e\n\u003col\u003e\n  \u003cli\u003eCount the number of separate threads in the program.\u003c/li\u003e\n  \u003cli\u003eCount the number of threads that can run at the same time.\u003c/li\u003e\n  \u003cli\u003eIdentify all pieces of data that are accessed by more than one thread identified in 2. Include parameters that get passed between threads in this list. You must protect access to this data.\u003c/li\u003e\n  \u003cli\u003eProtect access to data with locks. Use one or more locks, as necessary. Don't forget: \u003cstrong\u003eAlways attempt to lock in the same order and unlock in the reverse of the locking order\u003c/strong\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAgain, this is a minimal solution, but it works. You can solve most problems this way. If you think that there is anything wrong with it, drop me a line. For those of you programming in Java, a good book on the subject is Concurrent Programming in Java, 2nd. Ed., Design Principles and Patterns, by Doug Lea.\u003c/p\u003e\n\u003cp\u003eI know that both of these subjects deserve way more detail than what I have time for in this short note, but I hope that now that you are aware of these problems, you will take steps to prevent them in your next project.\u003c/p\u003e\n\u003ch2\u003eHow Can You Start?\u003c/h2\u003e\n\u003cp\u003eA few simple rules can get you going and can help you create better components:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003eComponent interfaces should be minimal yet usable.\u003c/li\u003e\n  \u003cli\u003eClass interfaces should be primitive.\u003c/li\u003e\n  \u003cli\u003ePublic interfaces should be complete.\u003c/li\u003e\n  \u003cli\u003ePrivate interfaces should be sufficient.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAsk the question: What component would I need to have to get the job done? If I would have a component that can do x, then could I implement what the customer is asking for? and so on. Group the requested features into components. Do the memory test with them. Ask a friend to also do the memory test. In no time you'll be writing great components.\u003c/p\u003e\n\u003cp\u003eFor more on this refer to the Lakos book, Large Scale C++ Program Design. And don't worry about the title, most of the stuff applies nicely to Java as well. Another good source for advice and thorough theoretical explanation is Object-Oriented Software Construction, 2nd Ed. by Bertrand Meyer. And of course, you can always crack open Code Complete by Steve McConnell.\u003c/p\u003e\n\u003cp\u003eLet me how your components are coming along.\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"main\",null,{\"data-pagefind-body\":true,\"className\":\"flex flex-col\",\"children\":[[\"$\",\"article\",null,{\"id\":\"article\",\"className\":\"content-page grid grid-cols-1 self-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"content-prose\",\"children\":[\"$\",\"h1\",null,{\"className\":\"\",\"children\":\"Common Defects\"}]}],[\"$\",\"div\",null,{\"className\":\"content-subtitle\",\"children\":\"\"}],[\"$\",\"div\",null,{\"className\":\"content-date-tags\",\"children\":[\"$\",\"div\",null,{\"className\":\"brand-text-accent my-2 text-sm\",\"children\":[\"üóìÔ∏è\",[\"$\",\"span\",null,{\"className\":\"date-short px-1\",\"children\":\"Oct 14, 2001\"}],[\"$\",\"span\",null,{\"className\":\"date-long px-1\",\"children\":\"October 14, 2001\"}],[[\"$\",\"span\",null,{\"className\":\"pr-2\"}],[[\"$\",\"span\",\"Design\",{\"children\":[\"$\",\"span\",null,{\"className\":\"inline whitespace-nowrap pr-2 leading-loose\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/tags/design\",\"children\":[\"üè∑Ô∏è \",\"Design\"]}]}]}],[\"$\",\"span\",\"Quality\",{\"children\":[\"$\",\"span\",null,{\"className\":\"inline whitespace-nowrap pr-2 leading-loose\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/tags/quality\",\"children\":[\"üè∑Ô∏è \",\"Quality\"]}]}]}]]]]}]}],[\"$\",\"div\",null,{\"className\":\"content-reading-time\",\"children\":\"üìñ 6 minute read\"}],[\"$\",\"div\",null,{\"className\":\"content-prose pt-4\",\"dangerouslySetInnerHTML\":{\"__html\":\"$13\"}}]]}],\"$L14\"]}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"div\",null,{\"className\":\"pager\",\"children\":[[\"$\",\"div\",null,{\"className\":\"pager-btn pager-btn-left justify-self-start\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/articles/apollo-guidance-computer\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-row gap-2\",\"children\":[[\"$\",\"div\",null,{\"className\":\"self-center\",\"children\":\"‚Äπ‚Äπ\"}],[\"$\",\"div\",null,{\"className\":\"link-long\",\"children\":\"The Apollo Guidance Computer\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"pager-btn pager-btn-right justify-self-end\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/articles/what-do-you-know\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-row gap-2\",\"children\":[[\"$\",\"div\",null,{\"className\":\"link-long\",\"children\":\"What do you know?\"}],[\"$\",\"div\",null,{\"className\":\"self-center\",\"children\":\"‚Ä∫‚Ä∫\"}]]}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:null\n"])</script><script>self.__next_f.push([1,"15:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/bf5f4fcdb6d9e318.js\"],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Common Defects\"}],[\"$\",\"meta\",\"1\",{\"name\":\"application-name\",\"content\":\"Steve on Software\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Steve Teleki\"}],[\"$\",\"meta\",\"3\",{\"name\":\"generator\",\"content\":\"Next.js+Unified.js\"}],[\"$\",\"meta\",\"4\",{\"name\":\"keywords\",\"content\":\"Design,Quality\"}],[\"$\",\"meta\",\"5\",{\"name\":\"referrer\",\"content\":\"origin-when-cross-origin\"}],[\"$\",\"meta\",\"6\",{\"name\":\"creator\",\"content\":\"Steve Teleki\"}],[\"$\",\"meta\",\"7\",{\"name\":\"publisher\",\"content\":\"Steve Teleki\"}],[\"$\",\"meta\",\"8\",{\"name\":\"robots\",\"content\":\"index, follow, nocache\"}],[\"$\",\"meta\",\"9\",{\"name\":\"category\",\"content\":\"technology\"}],[\"$\",\"meta\",\"10\",{\"name\":\"summary\",\"content\":\"A while back I had the opportunity to analyze a few defects up close. I saw some interesting types and I decided to write about them. Understanding the nature of your defects could prove to be useful for your day-to-day work. Most of the program defects that I have seen fall into one of the following categories...\"}],[\"$\",\"meta\",\"11\",{\"name\":\"format-detection\",\"content\":\"telephone=no, address=no, email=no\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:title\",\"content\":\"Common Defects\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:title\",\"content\":\"Common Defects\"}],[\"$\",\"link\",\"15\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.b28d3dba.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"link\",\"16\",{\"rel\":\"icon\",\"href\":\"/icon.png?icon.5872d748.png\",\"sizes\":\"180x180\",\"type\":\"image/png\"}],[\"$\",\"link\",\"17\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?apple-icon.5872d748.png\",\"sizes\":\"180x180\",\"type\":\"image/png\"}],[\"$\",\"$L15\",\"18\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"11:\"$c:metadata\"\n"])</script></body></html>